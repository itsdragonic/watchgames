<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infinite Scroll with Constant ScrollTo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      height: 5000px;
      background-color: #ff0000;
    }
    
    .floating-square {
      position: fixed;
      width: 320px;
      height: 360px;
      background-image: linear-gradient(red, yellow);
      top: 50%;
      left: 50%;
      transform: translate(-50%, calc(-50% - 20px));
      transition: transform 0.2s ease-in-out;
    }

    .rectangle {
        position: absolute;
        width: 20px;
        height: 60px;
        background: #000;
        border-radius: 20px;
        transform: translate(0, 0); /* No translation needed since offsets are manually added */
    }

    #player {
        top: 100px; /* Centered vertically with an offset */
        left: calc(90%); /* Centered horizontally with an offset */
    }

    #ai {
        top: 100px; /* Centered vertically with an offset */
        left: calc(8%); /* Centered horizontally with an offset */
    }

    .circle {
        position: absolute; /* Keeps the circle visually in the center */
        width: 30px;
        height: 30px;
        background-color: red;
        border-radius: 50%;
        top: 150px;
        left: 45%;
        /*transform: translate(-50%, -50%);*/
    }
  </style>
</head>
<body>
  <div id="floatingSquare" class="floating-square">
    <div id="player" class="rectangle"></div>
    <div id="ai" class="rectangle"></div>
    <div class="circle"></div>
  </div>

<script>
  const floatingSquare = document.getElementById("floatingSquare");

  var tops = 100;
  var player = document.getElementById('player');
  var ball = document.querySelector('.circle');

  // Scroll color change logic
  function handleScroll() {
    const middleY = document.body.scrollHeight / 2;

    if (window.scrollY > middleY + 1) {
      ball.style.backgroundColor = 'green'; // Scrolling down
      tops -= 15;
    } else if (window.scrollY < middleY - 1) {
      ball.style.backgroundColor = 'blue'; // Scrolling up
      tops += 15;
    }

    // Upper and lower bounds
    if (tops < 0) tops = 0;
    if (tops > 280) tops = 280;

    player.style.top = `${tops}px`;

  }

  // Constantly running scroll command
  function constantScroll() {
    window.scrollTo({
      top: document.body.scrollHeight / 2,
      behavior: 'instant',
    });

    requestAnimationFrame(constantScroll); // Keeps the scroll running continuously
  }

  // Event listeners
  window.addEventListener("scroll", handleScroll);
</script>

</body>
</html>
