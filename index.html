<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong for Apple Watch</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: black;
        }

        canvas {
            display: block;
            margin: 0 auto;
            background-color: black;
        }
    </style>
</head>
<body>
    <canvas id="pong" width="430" height="352"></canvas>

    <script>
        const canvas = document.getElementById('pong');
        const ctx = canvas.getContext('2d');

        // Dimensions
        const WIDTH = canvas.width;
        const HEIGHT = canvas.height;

        // Paddle settings
        const PADDLE_WIDTH = 10;
        const PADDLE_HEIGHT = 70;
        const BALL_SIZE = 10;
        const PADDLE_SPEED = 4;

        // Paddle positions
        const leftPaddle = { x: 10, y: HEIGHT / 2 - PADDLE_HEIGHT / 2, dy: 0 };
        const rightPaddle = { x: WIDTH - 20, y: HEIGHT / 2 - PADDLE_HEIGHT / 2, dy: 0 };

        // Ball settings
        const ball = { x: WIDTH / 2, y: HEIGHT / 2, dx: 4, dy: 4 };

        // Draw a rectangle
        function drawRect(x, y, width, height, color = 'white') {
            ctx.fillStyle = color;
            ctx.fillRect(x, y, width, height);
        }

        // Draw the ball
        function drawBall() {
            drawRect(ball.x, ball.y, BALL_SIZE, BALL_SIZE);
        }

        // AI movement for left paddle
        function aiMove() {
            if (ball.y < leftPaddle.y) leftPaddle.y -= PADDLE_SPEED;
            else if (ball.y > leftPaddle.y + PADDLE_HEIGHT) leftPaddle.y += PADDLE_SPEED;
        }

        // Ball movement and collision detection
        function moveBall() {
            ball.x += ball.dx;
            ball.y += ball.dy;

            // Collision with top and bottom walls
            if (ball.y <= 0 || ball.y + BALL_SIZE >= HEIGHT) {
                ball.dy *= -1;
            }

            // Collision with paddles
            if (
                ball.x <= leftPaddle.x + PADDLE_WIDTH &&
                ball.y + BALL_SIZE >= leftPaddle.y &&
                ball.y <= leftPaddle.y + PADDLE_HEIGHT
            ) {
                ball.dx *= -1;
            }

            if (
                ball.x + BALL_SIZE >= rightPaddle.x &&
                ball.y + BALL_SIZE >= rightPaddle.y &&
                ball.y <= rightPaddle.y + PADDLE_HEIGHT
            ) {
                ball.dx *= -1;
            }

            // Reset ball position if it goes out of bounds
            if (ball.x < 0 || ball.x > WIDTH) {
                ball.x = WIDTH / 2;
                ball.y = HEIGHT / 2;
                ball.dx = 4 * (Math.random() > 0.5 ? 1 : -1);
                ball.dy = 4 * (Math.random() > 0.5 ? 1 : -1);
            }
        }

        // Render game elements
        function render() {
            ctx.clearRect(0, 0, WIDTH, HEIGHT);
            drawRect(leftPaddle.x, leftPaddle.y, PADDLE_WIDTH, PADDLE_HEIGHT);
            drawRect(rightPaddle.x, rightPaddle.y, PADDLE_WIDTH, PADDLE_HEIGHT);
            drawBall();
        }

        // Game loop
        function gameLoop() {
            aiMove();
            moveBall();
            render();
            requestAnimationFrame(gameLoop);
        }

        // User controls via scroll
        let scrollDelta = 0;

        window.addEventListener('wheel', (event) => {
            scrollDelta += event.deltaY;

            if (scrollDelta > 10) {
                rightPaddle.y += PADDLE_SPEED;
                scrollDelta = 0;
            } else if (scrollDelta < -10) {
                rightPaddle.y -= PADDLE_SPEED;
                scrollDelta = 0;
            }

            // Prevent paddles from moving out of bounds
            rightPaddle.y = Math.max(0, Math.min(HEIGHT - PADDLE_HEIGHT, rightPaddle.y));
        });

        // Start the game loop
        gameLoop();
    </script>
</body>
</html>
